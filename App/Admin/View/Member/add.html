<extend name="Public:layout"/>
<block name="page-content-row">
    <div class="page-header">
        <a class="label label-xlg label-primary arrowed " href="{:U('index')}">返回列表</a>
    </div>
    <div class="row">
                            <div class="col-xs-12">
                                <!-- PAGE CONTENT BEGINS -->
                                    <form class="form-horizontal" action="{:U('update')}" method="post" id="form">
                                    <div class="form-group">
                                        <label class="col-sm-1 control-label no-padding-right" for="form-field-1"> 用户名 </label>
                                        <div class="col-sm-9">
                                            <input type="text" name="user" id="user" class="rcol-xs-10 col-sm-5" value="">
                                            <span class="help-inline col-xs-12 col-sm-7">
                                                <span class="middle"><span class="red"> * </span>必填</span>
                                            </span>
                                        </div>
                                    </div>

                                    <div class="space-4"></div>

                                    <div class="form-group">
                                        <label class="col-sm-1 control-label no-padding-right" for="form-field-10"> 用户组 </label>
                                        <div class="col-sm-9">
                                        <select id="group_id" name="group_id" class="rcol-xs-10 col-sm-5">
                                            <volist name="usergroup" id="val">
                                                <option value="{$val['id']}" <if condition="$val['id'] eq $member['group_id']">selected="selected"</if>>{$val['title']}</option>
                                            </volist>
                                        </select>
                                        <span class="help-inline col-xs-12 col-sm-7">
                                                <span class="middle"></span>
                                            </span>
                                        </div>
                                    </div>
                                    
                                    <div class="space-4"></div>

                                    <div class="form-group">
                                        <label class="col-sm-1 control-label no-padding-right" for="form-field-2"> 用户密码 </label>
                                        <div class="col-sm-9">
                                            <input type="password" name="password" id="password" placeholder="用户密码" class="col-xs-10 col-sm-5" value="">
                                            <span class="help-inline col-xs-12 col-sm-7">
                                                <span class="middle"><span class="red"> * </span>必填</span>
                                            </span>
                                        </div>
                                    </div>

                                    <div class="space-4"></div>

                                    <div class="form-group">
                                        <label class="col-sm-1 control-label no-padding-right" for="form-field-4"> 头像 </label>
                                        <div class="col-sm-9">
                                            <div class="col-xs-10 col-sm-5">{:UpImage("head",100,100,$member['head'])}</div>
                                            <span class="help-inline col-xs-12 col-sm-7">
                                                <span class="middle">仅支持jpg、gif、png、bmp、jpeg，且小于1MB。</span>
                                            </span>
                                        </div>
                                        
                                    </div>
                                    <div class="space-4"></div>

                                    <div class="form-group">
                                        <label class="col-sm-1 control-label no-padding-right" for="form-field-4"> 性别 </label>
                                        <div class="col-sm-9">
                                            <select id="sex" name="sex" class="multiselect">
                                                <option value="0">保密</option>
                                                <option value="1">男</option>
                                                <option value="2">女</option>
                                            </select>
                                        </div>
                                    </div>

                                    <div class="space-4"></div>

                                    <div class="form-group">
                                        <label class="col-sm-1 control-label no-padding-right" for="id-date-picker-1">生日</label>
                                        <div class="col-xs-9 col-sm-9">
                                            <div class="input-group col-xs-5">
                                                <input class="form-control" id="birthday" name="birthday" value="" type="text" data-date-format="dd-mm-yyyy" />
                                                <span class="input-group-addon">
                                                    <i class="ace-icon fa fa-calendar bigger-110"></i>
                                                </span>
                                            </div>
                                        </div>
                                    </div>

                                    
                                    <div class="space-4"></div>

                                    <div class="form-group">
                                        <label class="col-sm-1 control-label no-padding-right" for="form-field-6"> 电话号码 </label>
                                        <div class="col-sm-9">
                                            <input type="text" name="phone" id="phone" placeholder="电话号码" class="col-xs-10 col-sm-5" value="{$member['phone']}">
                                            <span class="help-inline col-xs-12 col-sm-7">
                                                <span class="middle"></span>
                                            </span>
                                        </div>
                                    </div>

                                    <div class="space-4"></div>

                                    <div class="form-group">
                                        <label class="col-sm-1 control-label no-padding-right" for="form-field-7"> Q&nbsp;&nbsp;Q </label>
                                        <div class="col-sm-9">
                                            <input type="text" name="qq" id="qq" placeholder="QQ" class="col-xs-10 col-sm-5" value="{$member['qq']}">
                                            <span class="help-inline col-xs-12 col-sm-7">
                                                <span class="middle"></span>
                                            </span>
                                        </div>
                                    </div>

                                    <div class="space-4"></div>

                                    <div class="form-group">
                                        <label class="col-sm-1 control-label no-padding-right" for="form-field-8"> E-mail </label>
                                        <div class="col-sm-9">
                                            <input type="email" name="email" id="email" placeholder="E-mail" class="col-xs-10 col-sm-5" value="{$member['email']}">
                                            <span class="help-inline col-xs-12 col-sm-7">
                                                <span class="middle"></span>
                                            </span>
                                        </div>
                                    </div>
                                
                                    <div class="space-4"></div>
                                    
                                    <div class="col-md-offset-2 col-md-9">
                                        <button class="btn btn-info submit" type="button">
                                            <i class="icon-ok bigger-110"></i>提交
                                        </button>
                                        &nbsp;&nbsp;&nbsp;&nbsp;
                                        <button class="btn btn-primary" type="reset">
                                            <i class="icon-undo bigger-110"></i>重置
                                        </button>
                                    </div>
                                </form>
                                <!-- PAGE CONTENT ENDS -->
                            </div><!-- /.col -->
                        </div><!-- /.row -->
</block>
<block name="currentPageJS">
    <script src="__PUBLIC__/hyadmin/js/date-time/bootstrap-datepicker.js"></script>
    <script type="text/javascript">
        jQuery(function($){
            $('#birthday').datepicker({
                  format: 'yyyy-mm-dd',
                        weekStart: 1,
                        autoclose: true,
                        todayBtn: 'linked',
                        language: 'cn'
                 });
            });

        $(".btn-info.submit").click(function(){
            var password = $.trim($("#password").val());
            var user = $.trim($("#user").val());
            if(password == ''){
                bootbox.dialog({
                    title: '友情提示：',
                    message: "请填写用户密码！", 
                    buttons: {
                        "success" : {
                            "label" : "确定",
                            "className" : "btn-danger"
                        }
                    }
                });
                return;
            }
            if(user == ''){
                bootbox.dialog({
                    title: '友情提示：',
                    message: "请填写用户名！", 
                    buttons: {
                        "success" : {
                            "label" : "确定",
                            "className" : "btn-danger"
                        }
                    }
                });
                return;
            }
            $.ajax({
                url: "{:U('checkUsername')}",
                type: 'POST',
                dataType: 'json',
                data: {'user': user},
            })
            .done(function(data) {
                if(data==0){
                    bootbox.dialog({
                        title: '友情提示：',
                        message: "该酒店管理员名称已存在", 
                        buttons: {
                            "success" : {
                                "label" : "确定",
                                "className" : "btn-danger"
                            }
                        }
                    });
                    return;
                }
                $("#form").submit();
            });
        });
    </script>
</block>
